---
const courses = [
  {
    title: "Herramienta de diagnostico pastoral",
    type: "tool",
    shortDescription:
      "¬øQuieres saber si tienes las üõ† perfectas en tu pastoral? Contesta a este formulario y te ayudaremos a identificar qu√© √°reas necesitas mejorar üë®‚Äçüîß o de lo contrario celebrarlo üéâ.",
    url: "https://diagnostico.rpj.es/",
    imageURL: "/courses/herramienta-de-procesos-pastorales.webp",
    numberOfClasses: null,
    priceEuros: 0.0,
    dateStart: "2023-01-01",
    dateEnd: "2023-01-31",
  },
  {
    title: "Curso de Liderazgo Pastoral",
    type: "course",
    shortDescription:
      "Aprende las habilidades esenciales para liderar equipos pastorales efectivos.",
    url: "#",
    imageURL: "/courses/herramienta-de-procesos-pastorales.webp",
    numberOfClasses: 8,
    priceEuros: 49.99,
    dateStart: "2023-02-01",
    dateEnd: "2023-03-15",
  },
  {
    title: "Taller de Comunicaci√≥n Efectiva",
    type: "workshop",
    shortDescription:
      "Mejora tus habilidades de comunicaci√≥n para transmitir el mensaje de manera clara y efectiva.",
    url: "#",
    imageURL: "/courses/herramienta-de-procesos-pastorales.webp",
    numberOfClasses: 3,
    priceEuros: 29.99,
    dateStart: "2023-04-10",
    dateEnd: "2023-04-24",
  },
  {
    title: "Herramienta de Planificaci√≥n Anual",
    type: "tool",
    shortDescription:
      "Organiza tu a√±o pastoral con esta herramienta de planificaci√≥n estrat√©gica.",
    url: "#",
    imageURL: "/courses/herramienta-de-procesos-pastorales.webp",
    numberOfClasses: null,
    priceEuros: 0.0,
    dateStart: "2023-05-01",
    dateEnd: null,
  },
];
---

<section class="mb-12 flex flex-col items-center justify-center">
  <div>
    <button
      id="filter-all"
      class="filter-btn p-2 pe-4 ps-4 m-1 text-sm font-semibold bg-primary text-white rounded-full"
      data-filter="all">Todos</button
    >
    <button
      id="filter-course"
      class="filter-btn p-2 pe-4 ps-4 m-1 text-sm hover:bg-primary bg-secondary text-white rounded-full"
      data-filter="course">Cursos</button
    >
    <button
      id="filter-workshop"
      class="filter-btn p-2 pe-4 ps-4 m-1 text-sm hover:bg-primary bg-secondary text-white rounded-full"
      data-filter="workshop">Talleres</button
    >
    <button
      id="filter-tool"
      class="filter-btn p-2 pe-4 ps-4 m-1 text-sm hover:bg-primary bg-secondary text-white rounded-full"
      data-filter="tool">Herramientas</button
    >
  </div>
  <div
    class="mt-4 text-white grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mx-4 md:mx-8 lg:mx-16"
  >
    {
      courses.map((course) => (
        <article
          class="course-item rounded-xl p-3 m-2 hover:cursor-pointer hover:border-4 border-4 border-white hover:border-primary"
          data-type={course.type}
          style={`
            background-image: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('${course.imageURL}');
            background-size: cover;
            background-position: center;
            color: white;
          `}
        >
          <h4 class="text-2xl md:text-3xl lg:text-4xl font-semibold">
            {course.title}
          </h4>
          <div class="flex flex-col md:flex-row justify-start items-end mt-2">
            <p class="mt-2">{course.shortDescription}</p>
            <span class="bg-primary w-14 aspect-square p-2 m-2 rounded-full font-semibold border-2 border-white flex items-center justify-center">
              {course.priceEuros > 0 ? `${course.priceEuros}‚Ç¨` : "0‚Ç¨"}
            </span>
          </div>
        </article>
      ))
    }
  </div>

  <script is:inline>
    // Funci√≥n para filtrar los cursos
    function filterCourses(filterType) {
      const courseItems = document.querySelectorAll(".course-item");
      const filterButtons = document.querySelectorAll(".filter-btn");

      // Actualizar clases de los botones
      filterButtons.forEach((button) => {
        if (button.dataset.filter === filterType) {
          button.classList.add("bg-primary");
          button.classList.remove("bg-secondary");
        } else {
          button.classList.remove("bg-primary");
          button.classList.add("bg-secondary");
        }
      });

      // Mostrar/ocultar cursos seg√∫n el filtro
      courseItems.forEach((item) => {
        if (filterType === "all" || item.dataset.type === filterType) {
          item.style.display = "";
        } else {
          item.style.display = "none";
        }
      });
    }

    // Agregar event listeners a los botones
    document.addEventListener("DOMContentLoaded", () => {
      const filterButtons = document.querySelectorAll(".filter-btn");

      filterButtons.forEach((button) => {
        button.addEventListener("click", () => {
          const filterType = button.dataset.filter;
          filterCourses(filterType);
        });
      });

      // Inicialmente mostrar todos
      filterCourses("all");
    });
  </script>
</section>
